{% extends "base.html" %}

{% block title %}Mi Historial - LandLink{% endblock %}

{% block content %}
<section class="volunteer-historial">
    <h1>Mi Historial de Participación</h1>
    
    <div class="historial-actions">
        <a href="{{ url_for('volunteer.dashboard') }}" class="btn btn-secondary">Volver al Dashboard</a>
    </div>
    
    <div class="stats-summary">
        <div class="stat-item">
            <span class="stat-value">{{ historial|length }}</span>
            <span class="stat-label">Eventos</span>
        </div>
        <div class="stat-item">
            <span class="stat-value">{{ historial|sum(attribute='horas') }}</span>
            <span class="stat-label">Horas</span>
        </div>
    </div>
    
    {% if historial %}
        <table class="data-table">
            <thead>
                <tr>
                    <th>Evento</th>
                    <th>Organización</th>
                    <th>Fecha</th>
                    <th>Rol</th>
                    <th>Horas</th>
                </tr>
            </thead>
            <tbody>
                {% for actividad in historial %}
                    <tr>
                        <td>{{ actividad.evento.nombre }}</td>
                        <td>{{ actividad.evento.organizacion.nombre }}</td>
                        <td>{{ actividad.fecha_participacion.strftime('%d/%m/%Y') }}</td>
                        <td>{{ actividad.rol_evento.nombre if actividad.rol_evento else 'N/A' }}</td>
                        <td>{{ actividad.horas }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="empty-state">
            <p>Aún no has participado en ningún evento.</p>
            <a href="{{ url_for('volunteer.events') }}" class="btn btn-primary">Explorar Eventos</a>
        </div>
    {% endif %}
</section>
{% endblock %}
