{% extends "base.html" %}

{% block title %}Panel de Voluntario - LandLink{% endblock %}

{% block content %}
<section class="volunteer-dashboard">
    <h1>Panel de Voluntario</h1>
    
    <div class="dashboard-actions">
        <a href="{{ url_for('volunteer.events') }}" class="btn btn-primary">Explorar Eventos</a>
        <a href="{{ url_for('volunteer.historial') }}" class="btn btn-secondary">Ver Mi Historial</a>
    </div>
    
    <div class="dashboard-grid">
        <div class="dashboard-card">
            <h3>Eventos Próximos</h3>
            {% if eventos_proximos %}
                <ul class="dashboard-list">
                    {% for evento in eventos_proximos %}
                        <li>
                            <strong>{{ evento.nombre }}</strong>
                            <span>{{ evento.fecha.strftime('%d/%m/%Y') }}</span>
                            <a href="{{ url_for('volunteer.event_detail', event_id=evento.id) }}" class="btn btn-sm">Ver</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No tienes eventos próximos.</p>
                <a href="{{ url_for('volunteer.events') }}" class="btn btn-sm">Explorar Eventos</a>
            {% endif %}
        </div>
        
        <div class="dashboard-card">
            <h3>Mis Solicitudes</h3>
            {% if solicitudes %}
                <ul class="dashboard-list">
                    {% for solicitud in solicitudes %}
                        <li>
                            <strong>{{ solicitud.evento.nombre }}</strong>
                            <span>{{ solicitud.evento.fecha.strftime('%d/%m/%Y') }}</span>
                            <span class="status-badge {{ solicitud.estado }}">{{ solicitud.estado }}</span>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No tienes solicitudes activas.</p>
            {% endif %}
        </div>
        
        <div class="dashboard-card">
            <h3>Resumen de Participación</h3>
            {% if historial %}
                <div class="stats-summary">
                    <div class="stat-item">
                        <span class="stat-value">{{ historial|length }}</span>
                        <span class="stat-label">Eventos</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ historial|sum(attribute='horas') }}</span>
                        <span class="stat-label">Horas</span>
                    </div>
                </div>
                <a href="{{ url_for('volunteer.historial') }}" class="btn btn-sm">Ver Historial Completo</a>
            {% else %}
                <p>Aún no has participado en ningún evento.</p>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
